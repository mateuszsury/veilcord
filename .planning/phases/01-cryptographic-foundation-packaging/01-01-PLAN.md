---
phase: 01-cryptographic-foundation-packaging
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - requirements.txt
  - src/__init__.py
  - src/main.py
  - frontend/package.json
  - frontend/vite.config.ts
  - frontend/tsconfig.json
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/vite-env.d.ts
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Python virtual environment exists with core dependencies installed"
    - "React frontend builds successfully with Vite"
    - "Project structure matches architecture from research"
  artifacts:
    - path: "requirements.txt"
      provides: "Python dependencies"
      contains: "cryptography"
    - path: "frontend/package.json"
      provides: "React dependencies"
      contains: "react"
    - path: "src/main.py"
      provides: "Application entry point"
      min_lines: 10
  key_links:
    - from: "frontend/vite.config.ts"
      to: "production build"
      via: "base: './' for relative paths"
      pattern: "base:\\s*['\"]\\.\\/['\"]"
---

<objective>
Establish project scaffolding with Python backend and React frontend structure.

Purpose: Create the foundational project structure that all other plans build upon. This validates that the build tooling works before adding complexity.

Output: Working Python + React project that can run in development mode.
</objective>

<execution_context>
@C:\Users\thete\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\thete\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-cryptographic-foundation-packaging/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Python Backend Structure</name>
  <files>
    requirements.txt
    src/__init__.py
    src/main.py
    .gitignore
  </files>
  <action>
Create Python backend structure:

1. Create `requirements.txt` with exact versions from research:
   - cryptography==46.0.4
   - pywin32>=306
   - sqlcipher3-binary>=0.5.3
   - pywebview>=6.1
   - argon2-cffi>=23.1.0
   - pyinstaller>=6.18.0

2. Create `src/__init__.py` (empty, marks as package)

3. Create `src/main.py` with minimal PyWebView setup:
   - Import webview
   - Create placeholder API class with `ping()` method returning "pong"
   - Create window pointing to frontend/dist/index.html
   - Include DEBUG flag to switch between dev server (http://localhost:5173) and dist

4. Create `.gitignore` with Python/React patterns:
   - __pycache__/, *.pyc
   - .venv/, venv/
   - node_modules/
   - dist/, build/
   - *.egg-info
   - .env
   - *.db, *.key (sensitive data)

IMPORTANT: Do NOT install packages yet - just create the requirements file. The executor should run pip install after file creation.
  </action>
  <verify>
    Files exist: `ls src/main.py requirements.txt .gitignore`
    requirements.txt contains cryptography: `grep -q "cryptography" requirements.txt && echo "OK"`
  </verify>
  <done>
    - requirements.txt lists all dependencies with versions
    - src/main.py has PyWebView window creation code
    - .gitignore covers Python and Node artifacts
  </done>
</task>

<task type="auto">
  <name>Task 2: Initialize React Frontend with Vite</name>
  <files>
    frontend/package.json
    frontend/vite.config.ts
    frontend/tsconfig.json
    frontend/tsconfig.node.json
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/vite-env.d.ts
    frontend/src/index.css
  </files>
  <action>
Create React frontend with Vite:

1. Create `frontend/` directory

2. Create `frontend/package.json`:
   ```json
   {
     "name": "discordopus-frontend",
     "private": true,
     "version": "0.0.1",
     "type": "module",
     "scripts": {
       "dev": "vite",
       "build": "tsc && vite build",
       "preview": "vite preview"
     },
     "dependencies": {
       "react": "^19.0.0",
       "react-dom": "^19.0.0",
       "zustand": "^5.0.0",
       "framer-motion": "^12.0.0"
     },
     "devDependencies": {
       "@types/react": "^19.0.0",
       "@types/react-dom": "^19.0.0",
       "@vitejs/plugin-react": "^4.3.0",
       "typescript": "~5.7.0",
       "vite": "^6.0.0",
       "tailwindcss": "^4.0.0",
       "@tailwindcss/vite": "^4.0.0"
     }
   }
   ```

3. Create `frontend/vite.config.ts`:
   - CRITICAL: Use `base: './'` for PyWebView relative paths
   - Configure path alias '@' to './src'
   - Include tailwindcss vite plugin
   - Set build output to 'dist'

4. Create `frontend/tsconfig.json`:
   - target: ES2022
   - module: ESNext
   - strict: true
   - paths: { "@/*": ["./src/*"] }

5. Create `frontend/tsconfig.node.json` for Vite config

6. Create `frontend/index.html`:
   - Root div with id="root"
   - Script module pointing to /src/main.tsx
   - Dark background color (#0a0a0a) in body style

7. Create `frontend/src/main.tsx`:
   - Import React, ReactDOM
   - Import App and index.css
   - Render App to root

8. Create `frontend/src/App.tsx`:
   - Simple component displaying "DiscordOpus Loading..."
   - Add pywebviewready event listener that logs when bridge is ready
   - Expose window.pywebview type declaration

9. Create `frontend/src/vite-env.d.ts` with Vite types

10. Create `frontend/src/index.css`:
    - Import tailwindcss
    - Set dark background on body: bg-[#0a0a0a]

IMPORTANT: Do NOT run npm install yet - just create the files.
  </action>
  <verify>
    Files exist: `ls frontend/package.json frontend/vite.config.ts frontend/src/App.tsx`
    Vite config has relative base: `grep -q "base.*'\\./" frontend/vite.config.ts && echo "OK"`
  </verify>
  <done>
    - frontend/package.json has React 19, Zustand, Framer Motion dependencies
    - frontend/vite.config.ts uses base: './' for PyWebView
    - frontend/src/App.tsx has pywebviewready event listener
    - Tailwind CSS v4 configured with Vite plugin
  </done>
</task>

<task type="auto">
  <name>Task 3: Install Dependencies and Verify Builds</name>
  <files>
    frontend/dist/index.html (generated)
  </files>
  <action>
Install dependencies and verify both build systems work:

1. Install Python dependencies:
   ```bash
   pip install -r requirements.txt
   ```

2. Install frontend dependencies:
   ```bash
   cd frontend && npm install
   ```

3. Build frontend for production:
   ```bash
   cd frontend && npm run build
   ```

4. Verify Python can import key packages:
   ```python
   python -c "import webview; import cryptography; print('Python OK')"
   ```

5. Verify frontend built successfully:
   - Check frontend/dist/index.html exists
   - Check frontend/dist/assets/ contains JS and CSS files

NOTE: This task validates the scaffolding works before other plans depend on it.
  </action>
  <verify>
    Python imports work: `python -c "import webview; import cryptography; print('OK')"`
    Frontend built: `ls frontend/dist/index.html`
  </verify>
  <done>
    - pip install completed without errors
    - npm install completed without errors
    - npm run build produced frontend/dist/index.html
    - Python can import webview and cryptography
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Project structure matches research architecture
2. Python dependencies installed and importable
3. React frontend builds to dist/
4. No errors in any build step
</verification>

<success_criteria>
- requirements.txt exists with all dependencies
- src/main.py has PyWebView window creation
- frontend/ has complete Vite + React setup
- `npm run build` succeeds in frontend/
- `python -c "import webview; import cryptography"` succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-cryptographic-foundation-packaging/01-01-SUMMARY.md`
</output>
