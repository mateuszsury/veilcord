---
phase: 02-signaling-infrastructure--presence
plan: 05
type: execute
wave: 4
depends_on: ["02-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User verifies connection status indicator works"
    - "User verifies status selector changes their status"
    - "User verifies network settings can be configured"
  artifacts: []
  key_links: []
---

<objective>
Visual verification of Phase 2 signaling and presence features.

Purpose: Ensure all connection, status, and presence UI elements work correctly before proceeding.
Output: User confirmation that Phase 2 features function as expected.
</objective>

<execution_context>
@C:\Users\thete\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\thete\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-signaling-infrastructure--presence/02-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Phase 2 signaling infrastructure and presence system:
    1. WebSocket signaling client with auto-reconnect
    2. Ed25519 challenge-response authentication
    3. Presence state management (status persistence)
    4. Contact online status tracking
    5. Connection status indicator in UI
    6. User status selector dropdown
    7. Network settings panel for server configuration
    8. Contact list with online status dots
  </what-built>
  <how-to-verify>
    **Start the app:**
    ```bash
    # If testing with dev server:
    cd frontend && npm run dev
    # In another terminal:
    python -m src.main --dev

    # Or run packaged exe if available
    ```

    **1. Connection Status Indicator:**
    - Look at the bottom of the sidebar
    - Should show connection state (disconnected/connecting/connected)
    - Color: red for disconnected, yellow for connecting, green for connected
    - Note: Without a real signaling server, it will show "disconnected" or "connecting"

    **2. User Status Selector:**
    - Look near the top of the sidebar (or in header area)
    - Should see a dropdown with current status
    - Click to expand - should show: Online, Away, Do Not Disturb, Invisible
    - Select different status - should change the displayed status

    **3. Network Settings:**
    - Open Settings panel (gear icon)
    - Look for "Network" section
    - Should see:
      - Signaling Server URL input field
      - Save button
      - Connection Status display
    - Try entering a test URL (e.g., wss://test.example.com/ws)
    - Click Save - should accept the URL (will fail to connect but that's expected)

    **4. Contact List Status Dots:**
    - Look at any contacts in the sidebar
    - Each contact should have a small colored dot indicating status
    - Without server, all should show gray (unknown)

    **5. Console Check (dev mode):**
    - Open browser dev tools console
    - Should see connection attempt logs
    - No JavaScript errors related to network/presence code

    **Expected behavior without signaling server:**
    - Connection state cycles between "connecting" and "disconnected"
    - User status selector works (persists across app restarts)
    - All contacts show "unknown" status (gray dot)
    - No crashes or error modals

    **If you have a signaling server to test with:**
    - Configure the server URL in Network settings
    - Connection should eventually show "connected"
    - Status changes should persist on server
    - If another client connects, their presence should appear
  </how-to-verify>
  <resume-signal>
    Reply with one of:
    - "approved" - All features work as described
    - Describe specific issues you found
  </resume-signal>
</task>

</tasks>

<verification>
User confirmation that Phase 2 UI and client-side features work correctly.
</verification>

<success_criteria>
- User confirms connection indicator displays correctly
- User confirms status selector works and persists
- User confirms network settings can be configured
- User confirms contact status dots appear
- No JavaScript errors or crashes
</success_criteria>

<output>
After completion, create `.planning/phases/02-signaling-infrastructure--presence/02-05-SUMMARY.md`
</output>
